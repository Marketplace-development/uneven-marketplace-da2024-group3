<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spinnback</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
    }
    .top-bar {
      width: 100%;
      background-color: #8c564b;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .top-bar h1 .intro-text{
      margin-left: 30px;
      font-size: 24px;
    }

    .top-bar h2 .intro-text h2{
      margin: 0;
      font-size: 24px;
      align-self: center;
    }
    .top-bar .intro-text p {
      margin: 5px 0 0;
      font-size: 14px;
    }

    .top-bar button {
      padding: 8px 12px;
      background-color: #ffffff;
      color: #8c564b;
      border: 1px solid #8c564b;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      margin-right: 30px;
    }

    .top-bar button:hover {
      background-color: #8c564b;
      color: white;
    }
  


/* Logo Styling */
    .LOGO-upload-container {
      position: absolute;
      top: 0px; /* Keeps the logo slightly above the top bar */
      left: 10px; /* Keeps it closer to the top-left corner */
      z-index: 2; /* Ensures the logo appears on top of other elements */
    }

    .LOGO-upload-container img {
      max-width: 80px; /* Slightly larger than the top bar height */
      height: 80px; /* Maintains aspect ratio */
    }


    /* Alert Styling */
    .alert-container {
      position: absolute;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      width: 80%;
      max-width: 600px;
      text-align: center;
    }
    
    .alert {
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      font-weight: bold;
      display: none; /* Initially hide the alert */
      opacity: 1; /* Initially fully visible */
    }

    .alert.success {
      background-color: #28a745;
      color: white;
    }

    .alert.error {
      background-color: #dc3545;
      color: white;
    }

    /* Fadeout animation */
    .alert.show {
      display: block; /* Make the alert visible */
      opacity: 1;
      animation: fadeOut 4s forwards; /* Increased duration for fade-out */
    }

    @keyframes fadeOut {
      0% {
        opacity: 1;
      }
      80% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }


    /* Listings Section */
    .listing-container {
      width: 90%;
      max-width: 1200px;
      background-color: #f9f9f9;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-top: 20px;
    }

    h1.page-title {
      font-family: 'Georgia', serif;
      font-size: 28px;
      margin-bottom: 20px;
      color: #5a3a28;
      text-align: center;
    }

    /* Grid layout for listings */
    .listings-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      background-color: #f9f9f9; /* Achtergrondkleur van de grid */
      padding: 0; /* Verwijdert padding van de grid-container */
      margin: 0 auto; /* Verwijdert eventuele marges rondom de grid */
      border: none; /* Verwijdert de rand van de grid */
      box-shadow: none; /* Verwijdert eventuele schaduw rond de grid */
    }
    
    /* Grid items (listings) */
    .listing {
      background-color: #f9f9f9; /* Achtergrondkleur van de vakken */
      border: none; /* Verwijdert de rand van de vakken */
      border-radius: 5px; /* Optioneel: afgeronde hoeken */
      padding: 10px;
      text-align: center;
      box-shadow: none; /* Verwijdert schaduwen van de vakken */
    }

    *,
    *::before,
    *::after {
      box-shadow: none !important;
    }
    

    .listing img {
      width: 100%;
      height: 200px;
      object-fit: contain;
      border-radius: 5px;
      margin-bottom: 10px;
      background-color: #f9f9f9;
    }

    .listing p {
      margin: 8px 0;
      font-size: 16px;
      color: #333;
    }

    .listing p.artist {
      font-weight: bold;
      color: #8c564b;
    }

    .listing-pair {
      display: flex;
      flex-direction: column; /* Stack the listings vertically */
      justify-content: center;
      align-items: center;
      background-color: #f9f9f9;
      border-radius: 5px;
      padding: 10px;
    }
    textarea.listing {
      width: 100%;
      resize: none; /* Voorkomt dat gebruikers het tekstvak handmatig kunnen vergroten/verkleinen */
      border: none; /* Verwijdert de rand rond het tekstvak */
      border-radius: 5px; /* Optioneel: laat de hoeken afgerond, kan verwijderd worden als je scherpe hoeken wilt */
      padding: 10px;
      font-size: 15.5px;
      font-weight: bold; /* Tekst vet maken */
      color: #5a3a28; /* Bruine tekstkleur */
      background-color: #ede2cf; /* Achtergrondkleur */
      font-family: 'Arial', sans-serif; /* Lettertype */
      line-height: 1.6; /* Regelafstand */
    }
    

    .listing-container textarea.listing {
      color: #5a3a28 !important; /* Bruine tekstkleur afdwingen */
    }
    
    
    /* Specifieke styling voor tekstvakken die 2 kolommen beslaan (zoals in rij 1) */
    textarea.listing.span2 {
      grid-column: span 2; /* Dit maakt het vak breed genoeg voor twee kolommen */
    }

    /* Specifieke styling voor tekstvakken die maar 1 kolom beslaan (zoals in rij 2 en 3) */
    textarea.listing.span1 {
      grid-column: span 1; /* Dit zorgt ervoor dat het vak maar één kolom beslaat */
    }

    .image-upload-container {
      grid-column: span 2; /* Make it span 2 columns */
      background-color: #f9f9f9; /* Match the background color */
      padding: 20px;
      text-align: center; /* Center the content */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #5a3a28; /* Matching text color */
      font-family: 'Arial', sans-serif;
    }
    
    .image-upload-container p {
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    #image-upload {
      margin-top: 0px;
    }
    
    #preview-image {
      display: block;
      max-width: 100%;
      margin-top: 10px;
      border: 1px solid #8c564b;
      border-radius: 5px;
    }
    
  </style>
</head>
<body>
  <!-- Flash messages section -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="alert-container">
        {% for category, message in messages %}
          <div class="alert {{ category }} show">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- Top Bar -->
  <div class="top-bar">
    <div></div>
    <div class="intro-text">
      <h2>LOGIN OR REGISTER TO PROCEED TO THE SPINNBACK PLATFORM</h2>
      <p>...Or find out what Spinnback is below!</p>
    </div>
    <div>
      <button onclick="location.href='/login'">Login</button>
      <button onclick="location.href='/register'">Register</button>
    </div> 
  </div>
  <div class="LOGO-upload-container">
    <img src="https://github.com/Marketplace-development/uneven-marketplace-da2024-group3/blob/main/images/LOGOOOO.png?raw=true/300x200" alt="Spinnback" style="max-width: 100%; border-radius: 10px; margin-top: 10px;"> <!-- afbeelding 2 -->
  </div>

  <!-- Listings Section -->
  <div class="listing-container">
    <div id="listings-container" class="listings-grid">
      <div class = "listing-pair">
        <!-- Dynamische vakken voor records -->
        <div class="listing">Vak 1</div>
        <div class="listing">Vak 2</div>
      </div>
      <div class = "listing-pair">
        <!-- Dynamische vakken voor records -->
        <div class="listing">Vak 3</div>
        <div class="listing">Vak 4</div>
      </div>
        <div class="image-upload-container">
            <img id="fixed-image" src="https://github.com/Marketplace-development/uneven-marketplace-da2024-group3/blob/main/images/text1%20overview.png?raw=true" alt="Spinnback" style="max-width: 100%; border-radius: 10px; margin-top: 10px;"> <!-- afbeelding 1 -->
        </div>
        <div class="image-upload-container">
          <img id="fixed-image" src="https://github.com/Marketplace-development/uneven-marketplace-da2024-group3/blob/main/images/text-2%20overview.png?raw=true" alt="Spinnback" style="max-width: 100%; border-radius: 10px; margin-top: 10px;"> <!-- afbeelding 2 -->
        </div>
        <div class = "listing-pair">
          <!-- Dynamische vakken voor records -->
          <div class="listing">Vak 1</div>
          <div class="listing">Vak 2</div>
        </div>
        <div class = "listing-pair">
          <!-- Dynamische vakken voor records -->
          <div class="listing">Vak 3</div>
          <div class="listing">Vak 4</div>
        </div>
        <div class = "listing-pair">
          <!-- Dynamische vakken voor records -->
          <div class="listing">Vak 1</div>
          <div class="listing">Vak 2</div>
        </div>
        <div class = "listing-pair">
          <!-- Dynamische vakken voor records -->
          <div class="listing">Vak 3</div>
          <div class="listing">Vak 4</div>
        </div>
        <div class="image-upload-container">
          <img id="fixed-image" src="https://github.com/Marketplace-development/uneven-marketplace-da2024-group3/blob/main/images/text3%20overview.png?raw=true" alt="Spinnback" style="max-width: 100%; border-radius: 10px; margin-top: 10px;"> <!-- afbeelding 1 -->
        </div>
        <div class="image-upload-container">
          <img id="fixed-image" src="https://github.com/Marketplace-development/uneven-marketplace-da2024-group3/blob/main/images/text4%20overview.png?raw=true" alt="Spinnback" style="max-width: 100%; border-radius: 10px; margin-top: 10px;"> <!-- afbeelding 2 -->
        </div>
        <div class = "listing-pair">
          <!-- Dynamische vakken voor records -->
          <div class="listing">Vak 1</div>
          <div class="listing">Vak 2</div>
        </div>
        <div class = "listing-pair">
          <!-- Dynamische vakken voor records -->
          <div class="listing">Vak 3</div>
          <div class="listing">Vak 4</div>
        </div>
    </div>
    


  <script>
    // Event handler om tekstdata te versturen
    document.querySelectorAll('textarea').forEach(textarea => {
      textarea.addEventListener('change', async () => {
        try {
          const response = await fetch('/save_text', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text: textarea.value })
          });

          if (!response.ok) {
            throw new Error('Fout bij opslaan van tekst');
          }

          alert('Tekst opgeslagen!');
        } catch (error) {
          console.error('Error:', error);
          alert('Fout bij opslaan van tekst.');
        }
      });
    });

    // Automatically hide the alert after a set duration (e.g., 100,000ms)
    setTimeout(function() {
      const alerts = document.querySelectorAll('.alert.show');
      alerts.forEach(alert => {
        alert.classList.remove('show'); // Remove show class to trigger fade-out
      });
    }, 100000);  // 100,000ms = 100 seconds
    
    // Fetch listings from the backend and render them
    async function loadListings() {
      const container = document.getElementById('listings-container');
      try {
        const response = await fetch('/get_records'); // Haal gegevens op van de backend
        if (!response.ok) {
          throw new Error('Failed to fetch data');
        }
        const listings = await response.json();
    
        // Verkrijg alle listing-vakken die geen 'textarea' zijn
        const dynamicElements = Array.from(container.querySelectorAll('.listing:not(textarea)'));
    
        let dynamicIndex = 0;
    
        // Vul de dynamische vakken met records
        dynamicElements.forEach(vak => {
          if (dynamicIndex < listings.length) {
            const listing = listings[dynamicIndex++];
            vak.innerHTML = `
              <img src="${listing.image || 'placeholder.jpg'}" alt="${listing.albumname}">
              <p class="artist">${listing.artist}</p>
              <p>${listing.albumname}</p>
            `;
          }
        });
    
        // Voeg overige dynamische listings toe als er ruimte over is
        while (dynamicIndex < listings.length) {
          const listingDiv = document.createElement('div');
          listingDiv.className = 'listing';
          const listing = listings[dynamicIndex++];
          listingDiv.innerHTML = `
            <img src="${listing.image || 'placeholder.jpg'}" alt="${listing.albumname}">
            <p class="artist">${listing.artist}</p>
            <p>${listing.albumname}</p>
          `;
          container.appendChild(listingDiv);
        }
      } catch (error) {
        console.error('Error loading listings:', error);
        container.innerHTML = '<p>Failed to load listings. Please try again later.</p>';
      }
    }
    
    
    
    

    // Load the listings when the page loads
    window.onload = loadListings;
  </script>

</body>
</html>








